(this["webpackJsonpanime-gan.js"]=this["webpackJsonpanime-gan.js"]||[]).push([[0],{266:function(e,t,a){e.exports=a(297)},271:function(e,t,a){},277:function(e,t){},278:function(e,t){},286:function(e,t){},289:function(e,t){},290:function(e,t){},291:function(e,t){},293:function(e,t,a){},297:function(e,t,a){"use strict";a.r(t);var n,o=a(17),r=a.n(o),l=a(242),c=a.n(l),s=(a(271),a(4)),i=a.n(s),u=a(11),m=a(6),d=a(10),p=a(14),g=a(15),E=a(299),f=a(300),h=a(265),v=a(301),w=a(302),y=a(303),A=a(68),b=a(94);window.tf=A,window.tfc=b,window.progress=0,window.bytesUsed=0,A.enableProdMode();var x=window.location.href+"models/hayao/uint8/model.json",k=function(){var e=Object(u.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"hayao"===t?x=window.location.href+"models/hayao/".concat(a,"/model.json"):"paprika"===t?x=window.location.href+"models/paprika/".concat(a,"/model.json"):"shinkai"===t?x=window.location.href+"models/shinkai/".concat(a,"/model.json"):"strange_daddy"===t?x=window.location.href+"models/strange_daddy/".concat(a,"/model.json"):"charge"===t?x=window.location.href+"models/charge/".concat(a,"/model.json"):"iblard"===t&&(x=window.location.href+"models/iblard/".concat(a,"/model.json"));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),S=[.00023367749587460492,.054088046653978504,.1804816724673639,.18052037621199904,.2528568019649621,.37458444400475477,.39315031021211105,.39319017797911254,.4444196766347441,.5207431700988491,.550593651422125,.5542242372745627,.5605664132978859,.5806242652109398,.5927784050567816,.5962346785553008,.5981026434950807,.5989430676647844,.6435568450337933,.6676838282371483,.6684442258671517,.7463103400111626,.9019785470675509,.95],j=0,C=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=.9*(performance.now()-n)/15463.61999999499,a=j>=S.length?.95:S[j],j+=1,window.progress=a,o=A.memory(),window.bytesUsed=o.numBytes,e.abrupt("return",A.mirrorPad(t.inputs[0],t.inputs[1].arraySync(),"reflect"));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();b.registerOp("MirrorPad",C);var G=function(){var e=Object(u.a)(i.a.mark((function e(t,a,o,r){var l,c,s,u,m,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Generation start"),l=A.browser.fromPixels(o),console.log("Original image size:",l.shape),-1!==a?(s=(l.shape[0]>l.shape[1]?l.shape[0]:l.shape[1])/a,u=[Math.round(l.shape[0]/s),Math.round(l.shape[1]/s)],console.log("Scale to:",u),c=A.tidy((function(){return A.image.resizeBilinear(l,u).expandDims(0).div(255)})),l.dispose()):(c=A.tidy((function(){return l.expandDims(0).div(255)})),l.dispose()),n=performance.now(),e.next=7,t.executeAsync({generator_input:c});case 7:m=e.sent,c.dispose(),d=performance.now(),console.log("Image Generated"),console.log("Took ".concat((d-n)/1e3," s to generate the image")),A.browser.toPixels(m.squeeze(0).add(1).div(2),r),m.dispose();case 14:case"end":return e.stop()}}),e)})));return function(t,a,n,o){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(i.a.mark((function e(t,a,n,o,r,l){var c,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o?A.env().set("WEBGL_FORCE_F16_TEXTURES",!0):A.env().set("WEBGL_FORCE_F16_TEXTURES",!1),k(t,a),console.log("MODEL URL is:".concat(x)),console.log("model_name is:".concat(t)),console.log("model_type is:".concat(a)),c="s"===n?100:"m"===n?250:"l"===n?500:"ll"===n?750:"L"===n?1e3:-1,s=performance.now(),e.next=9,b.loadGraphModel(x).then(function(){var e=Object(u.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Model Loaded:".concat(x)),a=performance.now(),console.log("Took ".concat((a-s)/1e3," s to load the model")),console.log(t),e.next=6,G(t,c,document.getElementById(r),document.getElementById(l));case 6:A.disposeVariables(),console.log(A.memory());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 9:window.progress=1;case 10:case"end":return e.stop()}}),e)})));return function(t,a,n,o,r,l){return e.apply(this,arguments)}}(),_=(a(292),a(293),function(e){Object(p.a)(a,e);var t=Object(g.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).onUpload=function(e){var t=e.target,a=new FileReader;a.onload=function(){var e=a.result;n.setState({uploadedImageURL:e,uploaded:!0})},a.readAsDataURL(t.files[0])},n.download=function(e){var t=document.getElementById("output"),a=t.toDataURL("image/png"),n=document.createElement("a");n.download="output.png",n.href=a,n.click(),console.log(t)},n.generate=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===n.state.generationStatus){e.next=2;break}return e.abrupt("return");case 2:if(console.log(n.state),!1!==n.state.uploaded){e.next=6;break}return alert("Please upload an image."),e.abrupt("return");case 6:if("none"!==n.state.resize){e.next=9;break}return alert("Please select a resize method."),e.abrupt("return");case 9:return window.progress=0,window.bytesUsed=0,t=setInterval((function(){n.setState({generationProgress:100*window.progress,bytesUsed:window.bytesUsed}),1!==n.state.generationStatus&&clearInterval(t)}),500),n.setState({generationStatus:1,updateGenerationProgressInterval:t}),a=!1,e.prev=14,e.next=17,I(n.state.model_name,n.state.model_type,n.state.resize,n.state.fp16,"uploaded-image","output");case 17:a=!0,e.next=24;break;case 20:e.prev=20,e.t0=e.catch(14),alert("Error encountered while generating image: "+e.t0),n.setState({generationStatus:0});case 24:a&&n.setState({generationStatus:2});case 25:case"end":return e.stop()}}),e,null,[[14,20]])}))),n.componentWillUnmount=function(){-1!==n.state.updateGenerationProgressInterval&&clearInterval(n.state.updateGenerationProgressInterval)},n.state={uploadedImageURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",uploaded:!1,model_name:"hayao",model_type:"float32",fp16:0,resize:"l",generationStatus:0,updateGenerationgresProsInterval:-1,bytesUsed:0},n}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement(E.a,{fluid:!0,style:{display:0===this.state.generationStatus?"block":"none"}},r.a.createElement(f.a,{className:"margin"},r.a.createElement(h.a,null),r.a.createElement(h.a,{xs:"12"},r.a.createElement("h1",{style:{marginBottom:"20px",textAlign:"center"}},"AnimeGAN-js beta: 0.0.5v ")),r.a.createElement(h.a,null)),r.a.createElement(f.a,{className:"margin"},r.a.createElement(h.a,null),r.a.createElement(h.a,{xs:"12",md:"8",lg:"6"},r.a.createElement(v.a,null,r.a.createElement(v.a.File,{accept:"image/*",label:this.state.uploaded?"Change the image":"\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc",onChange:this.onUpload,multiple:!1,custom:!0}))),r.a.createElement(h.a,null)),r.a.createElement(f.a,{className:"margin"},r.a.createElement(h.a,null),r.a.createElement(h.a,{xs:"12",md:"8",lg:"5",xl:"4",style:{textAlign:"center",margin:"20px"}},r.a.createElement("img",{id:"uploaded-image",alt:"",src:this.state.uploadedImageURL})),r.a.createElement(h.a,null)),r.a.createElement(f.a,{className:"margin"},r.a.createElement(h.a,null),r.a.createElement(h.a,{xs:"12",md:"8",lg:"6",style:{textAlign:"center"}},r.a.createElement(v.a,null,r.a.createElement(v.a.Group,{controlId:"model_name"},r.a.createElement(v.a.Control,{as:"select",onChange:function(t){return e.setState({model_name:t.target.value})}},r.a.createElement("option",{value:"hayao"},"\ubbf8\uc57c\uc790\ud0a4 \ud558\uc57c\uc624"),r.a.createElement("option",{value:"paprika"},"\ud30c\ud504\ub9ac\uce74"),r.a.createElement("option",{value:"shinkai"},"\uc2e0\uce74\uc774"),r.a.createElement("option",{value:"strange_daddy"},"\uc774\uc0c1\ud55c \uc544\ube60\uc758 \uc2dd\uc131"),r.a.createElement("option",{value:"charge"},"\ucc28\uc9c0"),r.a.createElement("option",{value:"iblard"},"\uc774\ubc1c\ub77c\ub4dc"))),r.a.createElement(v.a.Group,{controlId:"resize"},r.a.createElement(v.a.Control,{defaultValue:"l",as:"select",onChange:function(t){return e.setState({resize:t.target.value})}},r.a.createElement("option",{value:"l"},"\uace0\ud654\uc9c8"),r.a.createElement("option",{value:"ll"},"\uace0\ud654\uc9c8+ (\uba54\ubaa8\ub9ac overflow \uc8fc\uc758!)"),r.a.createElement("option",{value:"L"},"\uace0\ud654\uc9c8++ (\uba54\ubaa8\ub9ac overflow \uc8fc\uc758!)"),r.a.createElement("option",{value:"m"},"\uc800\ud654\uc9c8"),r.a.createElement("option",{value:"original"},"\uc6d0\ubcf8(\ucd94\ucc9c\uc548\ud568)"))),r.a.createElement(v.a.Group,{controlId:"model_type"},r.a.createElement(v.a.Control,{as:"select",onChange:function(t){return e.setState({model_type:t.target.value})}},r.a.createElement("option",{value:"float32"},"float32"),r.a.createElement("option",{value:"uint8"},"uint8"),r.a.createElement("option",{value:"float16"},"float16"))),r.a.createElement(v.a.Group,{controlId:"fp16"},r.a.createElement(v.a.Control,{as:"select",onChange:function(t){return e.setState({fp16:parseInt(t.target.value)})}},r.a.createElement("option",{value:"0"},"WEB_GL FP16: False"),r.a.createElement("option",{value:"1"},"WEB_GL FP16: True"))),r.a.createElement(w.a,{variant:"primary",onClick:this.generate},"\uc774\ubbf8\uc9c0 \uc0dd\uc131"))),r.a.createElement(h.a,null))),r.a.createElement("div",{className:"overlay",style:{display:1===this.state.generationStatus?"block":"none"}},r.a.createElement("div",{style:{marginTop:"calc( 50vh - 50px )",height:"100px",textAlign:"center"}},r.a.createElement(E.a,{fluid:!0},r.a.createElement(f.a,null,r.a.createElement(h.a,null),r.a.createElement(h.a,{xs:"12",md:"8",lg:"6",style:{textAlign:"center"}},r.a.createElement(y.a,{now:this.state.generationProgress,style:{margin:"10px"}}),r.a.createElement("p",null,"\uc774\ubbf8\uc9c0 \uc0dd\uc131 \uc911 ..."),r.a.createElement("p",null,"\uba54\ubaa8\ub9ac \uc0ac\uc6a9\ub7c9 (MB): ",this.state.bytesUsed/Math.pow(1024,2)," ")),r.a.createElement(h.a,null))))),r.a.createElement("div",{className:"overlay",style:{display:2===this.state.generationStatus?"block":"none"}},r.a.createElement(E.a,{fluid:!0},r.a.createElement(f.a,{className:"margin"},r.a.createElement(h.a,null),r.a.createElement(h.a,{xs:"12",md:"8",lg:"5",xl:"4",style:{textAlign:"center",margin:"20px"}},r.a.createElement("canvas",{id:"output"})),r.a.createElement(h.a,null)),r.a.createElement(f.a,{className:"margin"},r.a.createElement(h.a,null),r.a.createElement(h.a,{xs:"12",md:"12",lg:"12",xl:"10",style:{textAlign:"center",margin:"20px"}},r.a.createElement("p",null,"Source codes were from following:"),r.a.createElement("p",null,"Frontend: ",r.a.createElement("a",{href:"https://github.com/TonyLianLong/AnimeGAN.js"},"https://github.com/TonyLianLong/AnimeGAN.js")),r.a.createElement("p",null,"Backend:  ",r.a.createElement("a",{href:"https://github.com/TachibanaYoshino/AnimeGAN"},"https://github.com/TachibanaYoshino/AnimeGAN")),r.a.createElement(w.a,{variant:"primary",onClick:this.download},"\uc774\ubbf8\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc"),r.a.createElement(w.a,{variant:"primary",onClick:function(){return window.location.reload()}},"\ub2e4\ub978 \uc774\ubbf8\uc9c0 \ub9cc\ub4e4\uae30")),r.a.createElement(h.a,null)))))}}]),a}(r.a.Component));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_,null)),document.getElementById("root")),function(){var e=performance.now();b.loadGraphModel(x).then((function(t){console.log("Model Loaded: ".concat(x));var a=performance.now();console.log("Took ".concat((a-e)/1e3," s to load the model")),t.dispose()}))}()}},[[266,1,2]]]);
//# sourceMappingURL=main.e000df8c.chunk.js.map